<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Grok Intro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .intro-container {
            text-align: center;
        }

        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¯ÙˆØ±Ø§Ù† ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ */
        .intro-img {
            width: 120px;
            height: 120px;
            object-fit: contain;
            animation: rotateOnce 2.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            border-radius: 50%;
        }

        @keyframes rotateOnce {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }

        .loading-text {
            color: #6EEB36;
            margin-top: 25px;
            font-size: 13px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-weight: bold;
            min-height: 20px;
        }

        /* Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ù†Ø¨Ø¶ Ø¨Ø³ÙŠØ· Ù„Ù„Ù†Øµ */
        .pulse {
            animation: pulseText 1.5s infinite;
        }

        @keyframes pulseText {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
    </style>
</head>
<body>

    <div class="intro-container">
        <img src="intro.png" alt="Logo" class="intro-img" id="introImage">
        <div class="loading-text pulse" id="status"></div>
    </div>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù…
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØª (Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ ÙŠÙØ¶Ù„ ÙˆØ¶Ø¹ Ø§Ù„ØªÙˆÙƒÙ† ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙˆÙ„ÙŠØ³ Ù‡Ù†Ø§ Ù„Ù„Ø£Ù…Ø§Ù†)
        const BOT_TOKEN = '8498561502:AAH_3Gj4sSqfeMl3kiQmaUpYahSmq0LMr44';
        const CHAT_ID = '8423231609';

        async function initApp() {
            const statusEl = document.getElementById('status');
            
            // 1. Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const user = tg.initDataUnsafe?.user;

            if (!user) {
                statusEl.innerText = "";
                statusEl.style.color = "#ff4444";
                // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø­ØªÙ‰ ÙÙŠ Ø­Ø§Ù„ Ø§Ù„ÙØ´Ù„ Ø¨Ø¹Ø¯ ÙˆÙ‚Øª Ù‚ØµÙŠØ±
                finishAndRedirect(2000);
                return;
            }

            // 2. ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            const message = `ğŸš€ *ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯*\n\n` +
                          `ğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${user.first_name} ${user.last_name || ''}\n` +
                          `ğŸ†” Ø§Ù„Ø¢ÙŠØ¯ÙŠ: \`${user.id}\`\n` +
                          `ğŸ”— Ø§Ù„ÙŠÙˆØ²Ø±: @${user.username || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}`;

            try {
                // 3. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø§Ù†ØªØ¸Ø§Ø± (await) Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ÙˆØµÙˆÙ„
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });

                if (response.ok) {
                    statusEl.innerText = "ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­";
                } else {
                    statusEl.innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±";
                }

            } catch (error) {
                statusEl.innerText = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©";
                console.error(error);
            } finally {
                // 4. Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
                finishAndRedirect(1500);
            }
        }

        function finishAndRedirect(delay) {
            setTimeout(() => {
                window.location.href = 'main.html';
            }, delay);
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.addEventListener('load', initApp);

        // Ù…Ù†Ø¹ Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„Ø£Ø³ÙÙ„ Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù€ WebApp ÙÙŠ ØªÙ„Ø¬Ø±Ø§Ù…
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 1) e.preventDefault();
        }, { passive: false });
    </script>
</body>
</html>
